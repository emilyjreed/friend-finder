<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tables Page</title>

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">

    <!-- Materialize icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>

<body>

    <div class="row">
        <div class="col s12 m8 offset-m2">
            <div class="card center blue-grey lighten-5">
                <div class="card-content">
                    <span class="card-title">
                        <h1 class="center">
                            <i class="material-icons medium">person_pin</i>Friend Finder</h1>
                </div>
                <div class="card-action">
                    <a class="waves-effect waves-light btn-large grey darken-4" href="/">
                        <i class="material-icons">home</i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col s12 m8 offset-m2">
            <div class="card blue-grey lighten-5">
                <div class="card-content">
                    <h4>Survey</h4>
                </div>
                <div class="card-action white">

                    <div class="row">
                        <form class="col s12">
                            <div class="row">
                                <div class="input-field">
                                    <i class="material-icons prefix">face</i>
                                    <textarea id="name" class="materialize-textarea"></textarea>
                                    <label for="name">Name</label>
                                </div>
                            </div>

                            <div class="row">
                                <div class="input-field">
                                    <i class="material-icons prefix">photo</i>
                                    <textarea id="photo" class="materialize-textarea"></textarea>
                                    <label for="name">Image Link</label>
                                </div>
                            </div>

                            <div class="input-field col s12">
                                <select id="q1">
                                    <option value="" disabled selected>Your mind is always buzzing with unexplored ideas and plans.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 1</label>
                            </div>
                            <div class="input-field col s12">
                                <select id="q2">
                                    <option value="" disabled selected>Generally speaking, you rely more on your experience than your imagination.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 2</label>
                            </div>
                            <div class="input-field col s12">
                                <select id="q3">
                                    <option value="" disabled selected>You find it easy to stay relaxed and focused even when there is some pressure.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 3</label>
                            </div>
                            <div class="input-field col s12">
                                <select id="q4">
                                    <option value="" disabled selected>You rarely do something just out of sheer curiosity.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 4</label>
                            </div>
                            <div class="input-field col s12">
                                <select id="q5">
                                    <option value="" disabled selected>People can rarely upset you.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 5</label>
                            </div>
                            <div class="input-field col s12">
                                <select id="q6">
                                    <option value="" disabled selected>It is often difficult for you to relate to other people’s feelings.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 6</label>
                            </div>
                            <div class="input-field col s12">
                                <select id="q7">
                                    <option value="" disabled selected>In a discussion, truth should be more important than people’s sensitivities.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 7</label>
                            </div>
                            <div class="input-field col s12">
                                <select id="q8">
                                    <option value="" disabled selected>You rarely get carried away by fantasies and ideas.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 8</label>
                            </div>
                            <div class="input-field col s12">
                                <select id="q9">
                                    <option value="" disabled selected>You think that everyone’s views should be respected regardless of whether they are supported
                                        by facts or not.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 9</label>
                            </div>
                            <div class="input-field col s12">
                                <select id="q10">
                                    <option value="" disabled selected>You feel more energetic after spending time with a group of people.
                                    </option>
                                    <option value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>
                                <label>Question 10</label>
                            </div>


                            <a data-target="modal1" class="waves-effect waves-light btn-large blue" id="submit">Submit</a>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="page-footer white">
        <div class="container">
            <p>
                <a href="/api/friends">API Friends List</a> |
                <a href="https://github.com">GitHub Repo</a>
            </p>
        </div>
    </footer>

    <div id="modal1" class="modal">
        <div class="modal-content">
            <h4 class="center-align">Your Match</h4>
            <h5 class="center-align" id="matchName"></h5>
            <img class="center-align" id="matchPhoto" height="50%" width="50%"></img>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
        </div>
    </div>

</body>

<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('select').formSelect();
        $('.modal').modal();

        $('#submit').on("click", function (event) {
            event.preventDefault();

            function validateForm() {
                var valid = true;
                $('.input-field').each(function () {
                    if ($(this).val() === '') {
                        valid = false;
                    }
                });
                return valid;
            }

            if (validateForm() === true) {

                var inputData = {
                    name: $('#name').val(),
                    photo: $('#photo').val(),
                    scores: [
                        $('#q1').val(),
                        $('#q2').val(),
                        $('#q3').val(),
                        $('#q4').val(),
                        $('#q5').val(),
                        $('#q6').val(),
                        $('#q7').val(),
                        $('#q8').val(),
                        $('#q9').val(),
                        $('#q10').val()
                    ]
                };

                $.post("/api/friends", inputData, function (data) {
                    $('#matchName').text(data.name);
                    $('#matchPhoto').attr("src", data.photo);
                    $('#modal1').modal("toggle");
                });
            } else {
                alert("Please fill out all fields before submitting!")
            }
        })
    });

</script>

</html>